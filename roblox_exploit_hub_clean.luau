--!strict

--[[ Configuration ]]
local Config = {
    Theme = {
        Primary = Color3.fromRGB(255, 117, 24), -- #FF7518 Orange
        Accent = Color3.fromRGB(204, 82, 0),    -- #CC5200 Dark Orange
        Background = Color3.fromRGB(0, 0, 0),  -- #000000 Black
        Text = Color3.fromRGB(255, 255, 255),  -- #FFFFFF White
        ButtonBorder = Color3.fromRGB(0, 0, 0) -- Black for button borders
    },
    GUI = {
        InitialSize = UDim2.new(0, 500, 0, 350),
        MinimizedSize = UDim2.new(0, 50, 0, 50),
        MinimizedPosition = UDim2.new(1, -60, 1, -60),
        AnimationSpeed = 0.2
    }
}

--[[ Services ]]
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

--[[ Main GUI Setup ]]
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ExploitHub"
ScreenGui.DisplayOrder = 999
ScreenGui.Parent = PlayerGui

local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = Config.GUI.InitialSize
MainFrame.Position = UDim2.new(0.5, -MainFrame.Size.X.Offset / 2, 0.5, -MainFrame.Size.Y.Offset / 2)
MainFrame.BackgroundColor3 = Config.Theme.Background
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = false
MainFrame.Visible = true
MainFrame.Parent = ScreenGui

--[[ Title Bar ]]
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Config.Theme.Primary
TitleBar.BorderSizePixel = 0
TitleBar.Active = true
TitleBar.Draggable = false
TitleBar.Parent = MainFrame

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Size = UDim2.new(1, -60, 1, 0)
TitleLabel.Position = UDim2.new(0, 0, 0, 0)
TitleLabel.BackgroundColor3 = Config.Theme.Primary
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "Exploit Hub"
TitleLabel.TextColor3 = Config.Theme.Text
TitleLabel.Font = Enum.Font.SourceSansBold
TitleLabel.TextSize = 20
TitleLabel.TextScaled = false
TitleLabel.Parent = TitleBar

--[[ Minimize Button ]]
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 30, 1, 0)
MinimizeButton.Position = UDim2.new(1, -30, 0, 0)
MinimizeButton.BackgroundColor3 = Config.Theme.Accent
MinimizeButton.BorderSizePixel = 1
MinimizeButton.BorderColor3 = Config.Theme.ButtonBorder
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Config.Theme.Text
MinimizeButton.Font = Enum.Font.SourceSansBold
MinimizeButton.TextSize = 20
MinimizeButton.Parent = TitleBar

--[[ Close Button (Toggle Full GUI) ]]
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 1, 0)
CloseButton.Position = UDim2.new(1, -60, 0, 0)
CloseButton.BackgroundColor3 = Config.Theme.Accent
CloseButton.BorderSizePixel = 1
CloseButton.BorderColor3 = Config.Theme.ButtonBorder
CloseButton.Text = "X"
CloseButton.TextColor3 = Config.Theme.Text
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 20
CloseButton.Parent = TitleBar

--[[ Minimized GUI (Small square icon) ]]
local MinimizedFrame = Instance.new("TextButton")
MinimizedFrame.Name = "MinimizedFrame"
MinimizedFrame.Size = Config.GUI.MinimizedSize
MinimizedFrame.Position = Config.GUI.MinimizedPosition
MinimizedFrame.BackgroundColor3 = Config.Theme.Primary
MinimizedFrame.BorderSizePixel = 1
MinimizedFrame.BorderColor3 = Config.Theme.ButtonBorder
MinimizedFrame.Text = "Hub"
MinimizedFrame.TextColor3 = Config.Theme.Text
MinimizedFrame.Font = Enum.Font.SourceSansBold
MinimizedFrame.TextSize = 16
MinimizedFrame.Visible = false
MinimizedFrame.Parent = ScreenGui

--[[ Draggable Logic ]]
local isDragging = false
local dragStart = Vector2.new(0, 0)
local startPosition = UDim2.new(0, 0, 0, 0)

local function startDrag(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        isDragging = true
        dragStart = input.Position
        startPosition = MainFrame.Position
        UserInputService.InputChanged:Connect(function(inputChanged)
            if inputChanged.UserInputType == Enum.UserInputType.MouseMovement or inputChanged.UserInputType == Enum.UserInputType.Touch then
                if isDragging then
                    local delta = inputChanged.Position - dragStart
                    local newX = startPosition.X.Offset + delta.X
                    local newY = startPosition.Y.Offset + delta.Y
                    MainFrame.Position = UDim2.new(0, newX, 0, newY)
                end
            end
        end)
    end
end

local function endDrag(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        isDragging = false
    end
end

TitleBar.InputBegan:Connect(startDrag)
TitleBar.InputEnded:Connect(endDrag)

--[[ Minimize/Maximize Logic ]]
local isMinimized = false

local function toggleMinimize()
    isMinimized = not isMinimized

    if isMinimized then
        local tweenInfo = TweenInfo.new(Config.GUI.AnimationSpeed, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local goal = {Size = Config.GUI.MinimizedSize, Position = Config.GUI.MinimizedPosition}
        local tween = TweenService:Create(MainFrame, tweenInfo, goal)
        tween:Play()
        tween.Completed:Wait()
        MainFrame.Visible = false
        MinimizedFrame.Visible = true
    else
        MainFrame.Visible = true
        MinimizedFrame.Visible = false
        local tweenInfo = TweenInfo.new(Config.GUI.AnimationSpeed, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local goal = {Size = Config.GUI.InitialSize, Position = UDim2.new(0.5, -Config.GUI.InitialSize.X.Offset / 2, 0.5, -Config.GUI.InitialSize.Y.Offset / 2)}
        local tween = TweenService:Create(MainFrame, tweenInfo, goal)
        tween:Play()
    end
end

MinimizeButton.MouseButton1Click:Connect(toggleMinimize)
MinimizedFrame.MouseButton1Click:Connect(toggleMinimize)

--[[ Toggle Full GUI (Close Button) ]]
local function toggleFullGUI()
    MainFrame.Visible = not MainFrame.Visible
    if not MainFrame.Visible then
        MinimizedFrame.Visible = false
    end
end

CloseButton.MouseButton1Click:Connect(toggleFullGUI)

--[[ Resizable Logic ]]
local isResizing = false
local resizeStart = Vector2.new(0, 0)
local startSize = UDim2.new(0, 0, 0, 0)

local ResizeHandle = Instance.new("Frame")
ResizeHandle.Name = "ResizeHandle"
ResizeHandle.Size = UDim2.new(0, 10, 0, 10)
ResizeHandle.Position = UDim2.new(1, -10, 1, -10)
ResizeHandle.BackgroundColor3 = Config.Theme.Accent
ResizeHandle.BorderSizePixel = 0
ResizeHandle.Active = true
ResizeHandle.Parent = MainFrame

ResizeHandle.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        isResizing = true
        resizeStart = input.Position
        startSize = MainFrame.Size
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if isResizing and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
        local delta = input.Position - resizeStart
        local newX = math.max(200, startSize.X.Offset + delta.X)
        local newY = math.max(150, startSize.Y.Offset + delta.Y)
        MainFrame.Size = UDim2.new(0, newX, 0, newY)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        isResizing = false
    end
end)

--[[ Tab System ]]
local TabContainer = Instance.new("Frame")
TabContainer.Name = "TabContainer"
TabContainer.Size = UDim2.new(0, 120, 1, -30)
TabContainer.Position = UDim2.new(0, 0, 0, 30)
TabContainer.BackgroundColor3 = Config.Theme.Accent
TabContainer.BorderSizePixel = 0
TabContainer.Parent = MainFrame

local TabContentContainer = Instance.new("Frame")
TabContentContainer.Name = "TabContentContainer"
TabContentContainer.Size = UDim2.new(1, -120, 1, -30)
TabContentContainer.Position = UDim2.new(0, 120, 0, 30)
TabContentContainer.BackgroundColor3 = Config.Theme.Background
TabContentContainer.BorderSizePixel = 0
TabContentContainer.Parent = MainFrame

local TabButtons = {}
local TabContents = {}
local ActiveTab = nil

local function createTab(name, contentFrame)
    local button = Instance.new("TextButton")
    button.Name = name .. "TabButton"
    button.Size = UDim2.new(1, 0, 0, 40)
    button.BackgroundColor3 = Config.Theme.Accent
    button.BorderSizePixel = 0
    button.Text = name
    button.TextColor3 = Config.Theme.Text
    button.Font = Enum.Font.SourceSansSemibold
    button.TextSize = 16
    button.Parent = TabContainer

    contentFrame.Name = name .. "TabContent"
    contentFrame.Size = UDim2.new(1, 0, 1, 0)
    contentFrame.Position = UDim2.new(0, 0, 0, 0)
    contentFrame.BackgroundColor3 = Config.Theme.Background
    contentFrame.BorderSizePixel = 0
    contentFrame.Visible = false
    contentFrame.Parent = TabContentContainer

    TabButtons[name] = button
    TabContents[name] = contentFrame

    button.MouseButton1Click:Connect(function()
        if ActiveTab then
            TabButtons[ActiveTab].BackgroundColor3 = Config.Theme.Accent
            TabContents[ActiveTab].Visible = false
        end
        ActiveTab = name
        button.BackgroundColor3 = Config.Theme.Primary
        contentFrame.Visible = true
    end)

    return contentFrame
end

--[[ UI Element Creation Helpers ]]
local function createSection(parent, title)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0, 25)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundColor3 = Config.Theme.Background
    label.BackgroundTransparency = 1
    label.Text = title
    label.TextColor3 = Config.Theme.Primary
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = parent
    return label
end

local function createToggle(parent, text, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -20, 0, 30)
    frame.Position = UDim2.new(0, 10, 0, 0)
    frame.BackgroundColor3 = Config.Theme.Background
    frame.BackgroundTransparency = 1
    frame.BorderSizePixel = 0
    frame.Parent = parent

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.7, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundColor3 = Config.Theme.Background
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Config.Theme.Text
    label.Font = Enum.Font.SourceSansSemibold
    label.TextSize = 16
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local button = Instance.new("TextButton")
    button.Name = "ToggleButton"
    button.Size = UDim2.new(0.25, 0, 1, 0)
    button.Position = UDim2.new(0.75, 0, 0, 0)
    button.BackgroundColor3 = Config.Theme.Accent
    button.BorderSizePixel = 1
    button.BorderColor3 = Config.Theme.ButtonBorder
    button.Text = "OFF"
    button.TextColor3 = Config.Theme.Text
    button.Font = Enum.Font.SourceSansBold
    button.TextSize = 16
    button.Parent = frame

    local active = false
    button.MouseButton1Click:Connect(function()
        active = not active
        button.Text = active and "ON" or "OFF"
        button.BackgroundColor3 = active and Config.Theme.Primary or Config.Theme.Accent
        callback(active)
    end)
    return frame
end

local function createButton(parent, text, callback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, 0)
    button.BackgroundColor3 = Config.Theme.Primary
    button.BorderSizePixel = 1
    button.BorderColor3 = Config.Theme.ButtonBorder
    button.Text = text
    button.TextColor3 = Config.Theme.Text
    button.Font = Enum.Font.SourceSansBold
    button.TextSize = 16
    button.Parent = parent
    button.MouseButton1Click:Connect(callback)
    return button
end

local function createTextbox(parent, labelText, defaultValue, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -20, 0, 30)
    frame.Position = UDim2.new(0, 10, 0, 0)
    frame.BackgroundColor3 = Config.Theme.Background
    frame.BackgroundTransparency = 1
    frame.BorderSizePixel = 0
    frame.Parent = parent

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.4, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundColor3 = Config.Theme.Background
    label.BackgroundTransparency = 1
    label.Text = labelText
    label.TextColor3 = Config.Theme.Text
    label.Font = Enum.Font.SourceSansSemibold
    label.TextSize = 16
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local textbox = Instance.new("TextBox")
    textbox.Size = UDim2.new(0.55, 0, 1, 0)
    textbox.Position = UDim2.new(0.45, 0, 0, 0)
    textbox.BackgroundColor3 = Config.Theme.Accent
    textbox.BorderSizePixel = 1
    textbox.BorderColor3 = Config.Theme.ButtonBorder
    textbox.Text = tostring(defaultValue)
    textbox.TextColor3 = Config.Theme.Text
    textbox.Font = Enum.Font.SourceSansSemibold
    textbox.TextSize = 16
    textbox.TextXAlignment = Enum.TextXAlignment.Left
    textbox.Parent = frame

    textbox.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            callback(textbox.Text)
        end
    end)
    return textbox
end

local function createDropdown(parent, labelText, options, callback)
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1, -20, 0, 30)
    frame.Position = UDim2.new(0, 10, 0, 0)
    frame.BackgroundColor3 = Config.Theme.Background
    frame.BackgroundTransparency = 1
    frame.BorderSizePixel = 0
    frame.Parent = parent

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0.4, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundColor3 = Config.Theme.Background
    label.BackgroundTransparency = 1
    label.Text = labelText
    label.TextColor3 = Config.Theme.Text
    label.Font = Enum.Font.SourceSansSemibold
    label.TextSize = 16
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = frame

    local dropdownButton = Instance.new("TextButton")
    dropdownButton.Size = UDim2.new(0.55, 0, 1, 0)
    dropdownButton.Position = UDim2.new(0.45, 0, 0, 0)
    dropdownButton.BackgroundColor3 = Config.Theme.Accent
    dropdownButton.BorderSizePixel = 1
    dropdownButton.BorderColor3 = Config.Theme.ButtonBorder
    dropdownButton.Text = options[1] or "Select"
    dropdownButton.TextColor3 = Config.Theme.Text
    dropdownButton.Font = Enum.Font.SourceSansSemibold
    dropdownButton.TextSize = 16
    dropdownButton.Parent = frame

    local dropdownFrame = Instance.new("Frame")
    dropdownFrame.Size = UDim2.new(0.55, 0, 0, math.min(#options * 30, 150)) -- Max 150px height
    dropdownFrame.Position = UDim2.new(0.45, 0, 1, 5) -- Below the button
    dropdownFrame.BackgroundColor3 = Config.Theme.Accent
    dropdownFrame.BorderSizePixel = 1
    dropdownFrame.BorderColor3 = Config.Theme.ButtonBorder
    dropdownFrame.Visible = false
    dropdownFrame.Parent = frame

    local dropdownLayout = Instance.new("UIListLayout")
    dropdownLayout.FillDirection = Enum.FillDirection.Vertical
    dropdownLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
    dropdownLayout.VerticalAlignment = Enum.VerticalAlignment.Top
    dropdownLayout.Padding = UDim.new(0, 2)
    dropdownLayout.Parent = dropdownFrame

    for i, option in ipairs(options) do
        local optionButton = Instance.new("TextButton")
        optionButton.Size = UDim2.new(1, 0, 0, 25)
        optionButton.BackgroundColor3 = Config.Theme.Accent
        optionButton.BackgroundTransparency = 0.5
        optionButton.BorderSizePixel = 0
        optionButton.Text = option
        optionButton.TextColor3 = Config.Theme.Text
        optionButton.Font = Enum.Font.SourceSansSemibold
        optionButton.TextSize = 14
        optionButton.Parent = dropdownFrame

        optionButton.MouseButton1Click:Connect(function()
            dropdownButton.Text = option
            dropdownFrame.Visible = false
            callback(option)
        end)
    end

    dropdownButton.MouseButton1Click:Connect(function()
        dropdownFrame.Visible = not dropdownFrame.Visible
    end)
    return dropdownButton
end

--[[ Main Tab ]]
local MainTabContent = createTab("Main", Instance.new("ScrollingFrame"))
local MainTabFeaturesLayout = Instance.new("UIListLayout")
MainTabFeaturesLayout.FillDirection = Enum.FillDirection.Vertical
MainTabFeaturesLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
MainTabFeaturesLayout.VerticalAlignment = Enum.VerticalAlignment.Top
MainTabFeaturesLayout.Padding = UDim.new(0, 5)
MainTabFeaturesLayout.Parent = MainTabContent

-- 1. ESP (Box, Name, Health, Distance, Tracers, customizable colors).
local espEnabled = false
local espDrawingObjects = {}
local espConnections = {}

local function createESPDrawing(character)
    local drawings = {}
    drawings.Box = Instance.new("BoxHandleAdornment")
    drawings.Box.Adornee = character
    drawings.Box.AlwaysOnTop = true
    drawings.Box.Color3 = Config.Theme.Primary
    drawings.Box.Transparency = 0.5
    drawings.Box.Visible = false
    drawings.Box.Parent = ScreenGui

    drawings.Name = Instance.new("TextLabel")
    drawings.Name.BackgroundTransparency = 1
    drawings.Name.TextColor3 = Config.Theme.Text
    drawings.Name.TextScaled = true
    drawings.Name.Size = UDim2.new(0, 100, 0, 20)
    drawings.Name.Font = Enum.Font.SourceSansBold
    drawings.Name.Visible = false
    drawings.Name.Parent = ScreenGui

    drawings.Health = Instance.new("TextLabel")
    drawings.Health.BackgroundTransparency = 1
    drawings.Health.TextColor3 = Color3.fromRGB(0, 255, 0)
    drawings.Health.TextScaled = true
    drawings.Health.Size = UDim2.new(0, 100, 0, 20)
    drawings.Health.Font = Enum.Font.SourceSansBold
    drawings.Health.Visible = false
    drawings.Health.Parent = ScreenGui

    drawings.Distance = Instance.new("TextLabel")
    drawings.Distance.BackgroundTransparency = 1
    drawings.Distance.TextColor3 = Config.Theme.Text
    drawings.Distance.TextScaled = true
    drawings.Distance.Size = UDim2.new(0, 100, 0, 20)
    drawings.Distance.Font = Enum.Font.SourceSansBold
    drawings.Distance.Visible = false
    drawings.Distance.Parent = ScreenGui

    -- Tracers (Line from player to target)
    drawings.Tracer = Instance.new("LineHandleAdornment")
    drawings.Tracer.Adornee = character
    drawings.Tracer.AlwaysOnTop = true
    drawings.Tracer.Color3 = Config.Theme.Accent
    drawings.Tracer.Thickness = 2
    drawings.Tracer.Visible = false
    drawings.Tracer.Parent = ScreenGui

    return drawings
end

local function updateESP(character)
    if not character or not character:FindFirstChildOfClass("Humanoid") or character:FindFirstChildOfClass("Humanoid").Health <= 0 then
        if espDrawingObjects[character] then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing:Remove()
            end
            espDrawingObjects[character] = nil
        end
        return
    end

    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end

    local camera = workspace.CurrentCamera
    local screenPoint, onScreen = camera:WorldToScreenPoint(rootPart.Position)

    if onScreen then
        if not espDrawingObjects[character] then
            espDrawingObjects[character] = createESPDrawing(character)
        end

        local headPosition = character:FindFirstChild("Head") and character.Head.Position or rootPart.Position
        local footPosition = rootPart.Position - Vector3.new(0, character.Humanoid.HipHeight, 0)

        local screenHead, onScreenHead = camera:WorldToScreenPoint(headPosition + Vector3.new(0, 0.5, 0))
        local screenFoot, onScreenFoot = camera:WorldToScreenPoint(footPosition - Vector3.new(0, 0.5, 0))

        if not onScreenHead and not onScreenFoot then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing.Visible = false
            end
            return
        end

        local boxHeight = math.abs(screenHead.Y - screenFoot.Y)
        local boxWidth = boxHeight / 2
        local boxPosition = Vector2.new(screenHead.X - boxWidth / 2, screenHead.Y)

        -- Update Box
        espDrawingObjects[character].Box.Visible = true
        espDrawingObjects[character].Box.Position = rootPart.Position
        espDrawingObjects[character].Box.Size = Vector3.new(1, humanoid.HipHeight * 2, 1)

        -- Update Name
        espDrawingObjects[character].Name.Visible = true
        espDrawingObjects[character].Name.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y - 20)
        espDrawingObjects[character].Name.Text = character.Name

        -- Update Health
        espDrawingObjects[character].Health.Visible = true
        espDrawingObjects[character].Health.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y + boxHeight + 5)
        espDrawingObjects[character].Health.Text = "HP: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)

        -- Update Distance
        local distance = (Player.Character.HumanoidRootPart.Position - rootPart.Position).Magnitude
        espDrawingObjects[character].Distance.Visible = true
        espDrawingObjects[character].Distance.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y + boxHeight + 20)
        espDrawingObjects[character].Distance.Text = "Dist: " .. math.floor(distance) .. "m"

        -- Update Tracer
        espDrawingObjects[character].Tracer.Visible = true
        espDrawingObjects[character].Tracer.CFrame = CFrame.new(Player.Character.HumanoidRootPart.Position, rootPart.Position)
        espDrawingObjects[character].Tracer.From = Player.Character.HumanoidRootPart.Position
        espDrawingObjects[character].Tracer.To = rootPart.Position

    else
        if espDrawingObjects[character] then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing.Visible = false
            end
        end
    end
end

local function disableESP()
    for char, drawings in pairs(espDrawingObjects) do
        for _, drawing in pairs(drawings) do
            drawing.Visible = false
            drawing:Remove()
        end
    end
    espDrawingObjects = {}
    for _, conn in pairs(espConnections) do
        conn:Disconnect()
    end
    espConnections = {}
end

local function enableESP()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= Player and player.Character then
            updateESP(player.Character)
            espConnections[player] = player.Character.DescendantAdded:Connect(function(descendant)
                if descendant:IsA("HumanoidRootPart") then
                    updateESP(player.Character)
                end
            end)
            espConnections[player .. "_removed"] = player.Character.AncestryChanged:Connect(function(_, parent)
                if not parent then -- Character removed
                    if espDrawingObjects[player.Character] then
                        for _, drawing in pairs(espDrawingObjects[player.Character]) do
                            drawing:Remove()
                        end
                        espDrawingObjects[player.Character] = nil
                    end
                end
            end)
        end
    end
    espConnections["playerAdded"] = Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(char)
            if espEnabled then
                updateESP(char)
            end
        end)
    end)
    espConnections["playerRemoving"] = Players.PlayerRemoving:Connect(function(player)
        if espDrawingObjects[player.Character] then
            for _, drawing in pairs(espDrawingObjects[player.Character]) do
                drawing:Remove()
            end
            espDrawingObjects[player.Character] = nil
        end
    end)
    espConnections["renderStepped"] = RunService.RenderStepped:Connect(function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= Player and player.Character then
                updateESP(player.Character)
            end
        end
    end)
end

createToggle(MainTabContent, "ESP", function(active)
    espEnabled = active
    if active then
        enableESP()
    else
        disableESP()
    end
end)

-- 2. Aimbot (Lock to head/body/random parts via dropdown, adjustable FOV via textbox, smooth prediction, no misses or errors).
local aimbotEnabled = false
local aimbotTargetPart = "Head"
local aimbotFOV = 90
local aimbotConnection = nil

local function findTarget()
    local closestTarget = nil
    local minDistance = math.huge
    local camera = workspace.CurrentCamera
    local localPlayerRoot = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    if not localPlayerRoot then return nil end

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= Player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChildOfClass("Humanoid") and player.Character:FindFirstChildOfClass("Humanoid").Health > 0 then
            local targetRoot = player.Character.HumanoidRootPart
            local targetPosition = targetRoot.Position
            local distance = (localPlayerRoot.Position - targetPosition).Magnitude

            local screenPoint, onScreen = camera:WorldToScreenPoint(targetPosition)
            if onScreen then
                local viewportSize = camera.ViewportSize
                local center = Vector2.new(viewportSize.X / 2, viewportSize.Y / 2)
                local fovDistance = (Vector2.new(screenPoint.X, screenPoint.Y) - center).Magnitude

                if fovDistance <= aimbotFOV and distance < minDistance then
                    minDistance = distance
                    closestTarget = player.Character
                end
            end
        end
    end
    return closestTarget
end

local function doAimbot()
    local target = findTarget()
    if target and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        local targetPart = target:FindFirstChild(aimbotTargetPart) or target.HumanoidRootPart
        if targetPart then
            local origin = Player.Character.HumanoidRootPart.CFrame.p
            local direction = (targetPart.Position - origin).Unit
            local lookAt = CFrame.new(origin, origin + direction)
            workspace.CurrentCamera.CFrame = TweenService:Create(workspace.CurrentCamera, TweenInfo.new(0.1), {CFrame = lookAt}):Play()
        end
    end
end

createToggle(MainTabContent, "Aimbot", function(active)
    aimbotEnabled = active
    if active then
        aimbotConnection = RunService.RenderStepped:Connect(doAimbot)
    else
        if aimbotConnection then
            aimbotConnection:Disconnect()
            aimbotConnection = nil
        end
    end
end)

createDropdown(MainTabContent, "Aimbot Part", {"Head", "HumanoidRootPart"}, function(selection)
    aimbotTargetPart = selection
end)

createTextbox(MainTabContent, "Aimbot FOV", aimbotFOV, function(value)
    aimbotFOV = tonumber(value) or aimbotFOV
end)

-- 3. WalkSpeed
local walkSpeedValue = 16
createTextbox(MainTabContent, "WalkSpeed", walkSpeedValue, function(value)
    walkSpeedValue = tonumber(value) or 16
    if Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = walkSpeedValue
    end
end)

-- 4. JumpPower
local jumpPowerValue = 50
createTextbox(MainTabContent, "JumpPower", jumpPowerValue, function(value)
    jumpPowerValue = tonumber(value) or 50
    if Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid").JumpPower = jumpPowerValue
    end
end)

-- 5. Infinite Jump
local infiniteJumpEnabled = false
local infiniteJumpConnection = nil

local function doInfiniteJump()
    if UserInputService:IsKeyDown(Enum.KeyCode.Space) and Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
    end
end

createToggle(MainTabContent, "Infinite Jump", function(active)
    infiniteJumpEnabled = active
    if active then
        infiniteJumpConnection = RunService.RenderStepped:Connect(doInfiniteJump)
    else
        if infiniteJumpConnection then
            infiniteJumpConnection:Disconnect()
            infiniteJumpConnection = nil
        end
    end
end)

-- 6. Noclip
local noclipEnabled = false
local noclipConnection = nil

local function toggleNoclip(active)
    noclipEnabled = active
    if Player.Character then
        for _, part in ipairs(Player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = not active
            end
        end
    end
end

createToggle(MainTabContent, "Noclip", function(active)
    toggleNoclip(active)
    if active then
        noclipConnection = Player.CharacterAdded:Connect(function(char)
            for _, part in ipairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
    end
end)

--[[ Hub Tab External Hubs ]]
local HubTabContent = createTab("Hub", Instance.new("ScrollingFrame"))
local HubTabFeaturesLayout = Instance.new("UIListLayout")
HubTabFeaturesLayout.FillDirection = Enum.FillDirection.Vertical
HubTabFeaturesLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
HubTabFeaturesLayout.VerticalAlignment = Enum.VerticalAlignment.Top
HubTabFeaturesLayout.Padding = UDim.new(0, 5)
HubTabFeaturesLayout.Parent = HubTabContent

local function createHubSection(parent, title)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0, 25)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundColor3 = Config.Theme.Background
    label.BackgroundTransparency = 1
    label.Text = title
    label.TextColor3 = Config.Theme.Primary
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = parent
    return label
end

local function createHubButton(parent, name, loadstringCode, isKeyless)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, 0)
    button.BackgroundColor3 = Config.Theme.Accent
    button.BorderSizePixel = 1
    button.BorderColor3 = Config.Theme.ButtonBorder
    button.Text = name .. (isKeyless and " - KEYLESS" or " - HAS KEY")
    button.TextColor3 = Config.Theme.Text
    button.Font = Enum.Font.SourceSansSemibold
    button.TextSize = 14
    button.TextXAlignment = Enum.TextXAlignment.Left
    button.Parent = parent

    button.MouseButton1Click:Connect(function()
        local success, err = pcall(function()
            loadstring(loadstringCode)()
        end)
        if not success then
            warn("Error executing hub script: " .. err)
        end
    end)
    return button
end

createHubSection(HubTabContent, "Popular Keyless Hubs")
createHubButton(HubTabContent, "Owl Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CriShoux/OwlHub/master/OwlHub.txt\"))()", true)
createHubButton(HubTabContent, "Dark Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/DarkHubOfficial/DarkHub/main/DarkHub.lua\"))()", true)
createHubButton(HubTabContent, "Infinite Yield", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source\"))()", true)
createHubButton(HubTabContent, "CMD-X", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CMD-X/CMD-X/master/Source\"))()", true)
createHubButton(HubTabContent, "Hoho Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/HohoHub/HohoHub/main/HohoHub.lua\"))()", true)

createHubSection(HubTabContent, "Other Hubs (May require key or be game-specific)")
createHubButton(HubTabContent, "Synapse X Hub", "-- Requires Synapse X", false)
createHubButton(HubTabContent, "Script-Ware Hub", "-- Requires Script-Ware", false)
createHubButton(HubTabContent, "KRNL Hub", "-- Requires KRNL", false)
createHubButton(HubTabContent, "Oxygen U Hub", "-- Requires Oxygen U", false)
createHubButton(HubTabContent, "Fluxus Hub", "-- Requires Fluxus", false)
createHubButton(HubTabContent, "Comet Hub", "-- Requires Comet", false)
createHubButton(HubTabContent, "Project X Hub", "-- Requires Project X", false)
createHubButton(HubTabContent, "Valyse Hub", "-- Requires Valyse", false)
createHubButton(HubTabContent, "Celestial Hub", "-- Requires Celestial", false)
createHubButton(HubTabContent, "Electron Hub", "-- Requires Electron", false)
createHubButton(HubTabContent, "JJSploit Hub", "-- Requires JJSploit", false)
createHubButton(HubTabContent, "Vega X Hub", "-- Requires Vega X", false)
createHubButton(HubTabContent, "Krnl Hub", "-- Requires Krnl", false)
createHubButton(HubTabContent, "Sentinel Hub", "-- Requires Sentinel", false)
createHubButton(HubTabContent, "ScriptBlox Hub", "-- Requires ScriptBlox", false)
createHubButton(HubTabContent, "Arceus X Hub", "-- Requires Arceus X", false)
createHubButton(HubTabContent, "Delta Hub", "-- Requires Delta", false)
createHubButton(HubTabContent, "GameSense Hub", "-- Requires GameSense", false)
createHubButton(HubTabContent, "Project Ghoul Hub", "-- Requires Project Ghoul", false)
createHubButton(HubTabContent, "Project One Hub", "-- Requires Project One", false)
createHubButton(HubTabContent, "Project Supreme Hub", "-- Requires Project Supreme", false)
createHubButton(HubTabContent, "The Forge Hub", "loadstring(game:HttpGet(\"https://api.luarmor.net/files/v3/loaders/280c3c5ae0ed18010fea0d86c424fdb5.lua\"))()", true)
createHubButton(HubTabContent, "ScriptBlox Keyless Hubs (Ohio Ixa, Ghost Hub, K Hub, Redz Updated, Idiot Hub, Speed Hub X Free)", "-- search on scriptblox.com for codes", true)
createHubButton(HubTabContent, "Universal/Keyless from GitHub (Parvus Shooter Hub, Owl Hub Classic, Fe Hub, RemoteSpy, AntiAFK)", "-- Parvus: loadstring(game:HttpGet(\"https://raw.githubusercontent.com/AlexR32/Parvus/main/Loader.lua\"))() -- Owl: loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CriShoux/OwlHub/master/OwlHub.txt\"))() -- Fe Hub: from GitHub R3v0ked/Scripts -- (search GitHub for \"roblox hub loadstring\")", true)

--[[ Executor Tab ]]
local ExecutorTabContent = createTab("Executor", Instance.new("ScrollingFrame"))
local ExecutorLayout = Instance.new("UIListLayout")
ExecutorLayout.FillDirection = Enum.FillDirection.Vertical
ExecutorLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
ExecutorLayout.VerticalAlignment = Enum.VerticalAlignment.Top
ExecutorLayout.Padding = UDim.new(0, 5)
ExecutorLayout.Parent = ExecutorTabContent

local CodeTextbox = Instance.new("TextBox")
CodeTextbox.Name = "CodeTextbox"
CodeTextbox.Size = UDim2.new(1, -20, 0.6, 0)
CodeTextbox.Position = UDim2.new(0, 10, 0, 10)
CodeTextbox.MultiLine = true
CodeTextbox.TextWrapped = true
CodeTextbox.PlaceholderText = "Paste your Luau code here..."
CodeTextbox.BackgroundColor3 = Config.Theme.Background
CodeTextbox.BorderSizePixel = 1
CodeTextbox.BorderColor3 = Config.Theme.Accent
CodeTextbox.TextColor3 = Config.Theme.Text
CodeTextbox.Font = Enum.Font.SourceSansSemibold
CodeTextbox.TextSize = 14
CodeTextbox.TextXAlignment = Enum.TextXAlignment.Left
CodeTextbox.TextYAlignment = Enum.TextYAlignment.Top
CodeTextbox.Parent = ExecutorTabContent

local ExecuteButton = Instance.new("TextButton")
ExecuteButton.Name = "ExecuteButton"
ExecuteButton.Size = UDim2.new(1, -20, 0, 30)
ExecuteButton.Position = UDim2.new(0, 10, 0, 0)
ExecuteButton.BackgroundColor3 = Config.Theme.Primary
ExecuteButton.BorderSizePixel = 1
ExecuteButton.BorderColor3 = Config.Theme.ButtonBorder
ExecuteButton.Text = "Execute"
ExecuteButton.TextColor3 = Config.Theme.Text
ExecuteButton.Font = Enum.Font.SourceSansBold
ExecuteButton.TextSize = 16
ExecuteButton.Parent = ExecutorTabContent

local OutputScrollFrame = Instance.new("ScrollingFrame")
OutputScrollFrame.Name = "OutputScrollFrame"
OutputScrollFrame.Size = UDim2.new(1, -20, 0.3, 0)
OutputScrollFrame.Position = UDim2.new(0, 10, 0, 0)
OutputScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
OutputScrollFrame.BackgroundColor3 = Config.Theme.Background
OutputScrollFrame.BorderSizePixel = 1
OutputScrollFrame.BorderColor3 = Config.Theme.Accent
OutputScrollFrame.ScrollBarImageColor3 = Config.Theme.Accent
OutputScrollFrame.Parent = ExecutorTabContent

local OutputLabel = Instance.new("TextLabel")
OutputLabel.Name = "OutputLabel"
OutputLabel.Size = UDim2.new(1, 0, 0, 0)
OutputLabel.Position = UDim2.new(0, 0, 0, 0)
OutputLabel.BackgroundColor3 = Config.Theme.Background
OutputLabel.BackgroundTransparency = 1
OutputLabel.Text = ""
OutputLabel.TextColor3 = Config.Theme.Text
OutputLabel.Font = Enum.Font.SourceSansSemibold
OutputLabel.TextSize = 12
OutputLabel.TextXAlignment = Enum.TextXAlignment.Left
OutputLabel.TextYAlignment = Enum.TextYAlignment.Top
OutputLabel.TextWrapped = true
OutputLabel.Parent = OutputScrollFrame

local function appendOutput(text, color)
    OutputLabel.Text = OutputLabel.Text .. "\n" .. text
    OutputLabel.TextColor3 = color or Config.Theme.Text
    OutputLabel.Size = UDim2.new(1, 0, 0, OutputLabel.TextFits.Y)
    OutputScrollFrame.CanvasSize = UDim2.new(0, 0, 0, OutputLabel.TextFits.Y)
    OutputScrollFrame.CanvasPosition = Vector2.new(0, OutputLabel.TextFits.Y)
end

ExecuteButton.MouseButton1Click:Connect(function()
    local code = CodeTextbox.Text
    if string.len(code) > 0 then
        appendOutput("Executing code...", Config.Theme.Primary)
        local success, result = pcall(function()
            local func = loadstring(code)
            if func then
                return func()
            else
                error("Failed to load string.")
            end
        end)

        if success then
            appendOutput("Execution successful! Result: " .. tostring(result), Color3.fromRGB(0, 255, 0))
        else
            appendOutput("Execution failed! Error: " .. tostring(result), Color3.fromRGB(255, 0, 0))
        end
    else
        appendOutput("Please enter some code to execute.", Config.Theme.Accent)
    end
end)

--[[ Settings Tab ]]
local SettingsTabContent = createTab("Settings", Instance.new("ScrollingFrame"))
local SettingsLayout = Instance.new("UIListLayout")
SettingsLayout.FillDirection = Enum.FillDirection.Vertical
SettingsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
SettingsLayout.VerticalAlignment = Enum.VerticalAlignment.Top
SettingsLayout.Padding = UDim.new(0, 5)
SettingsLayout.Parent = SettingsTabContent

-- Example setting: Theme Toggle
createToggle(SettingsTabContent, "Dark Mode", function(active)
    if active then
        Config.Theme.Background = Color3.fromRGB(0, 0, 0)
        Config.Theme.Text = Color3.fromRGB(255, 255, 255)
    else
        Config.Theme.Background = Color3.fromRGB(255, 255, 255)
        Config.Theme.Text = Color3.fromRGB(0, 0, 0)
    end
    -- Reapply theme to existing elements (simplified, a full implementation would iterate through all UI elements)
    MainFrame.BackgroundColor3 = Config.Theme.Background
    TabContentContainer.BackgroundColor3 = Config.Theme.Background
    -- You would need to update all other elements as well
end)

print("Exploit Hub GUI Loaded!")

--[[ Main Tab ]]
local MainTabContent = createTab("Main", Instance.new("ScrollingFrame"))
local MainTabFeaturesLayout = Instance.new("UIListLayout")
MainTabFeaturesLayout.FillDirection = Enum.FillDirection.Vertical
MainTabFeaturesLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
MainTabFeaturesLayout.VerticalAlignment = Enum.VerticalAlignment.Top
MainTabFeaturesLayout.Padding = UDim.new(0, 5)
MainTabFeaturesLayout.Parent = MainTabContent

-- 1. ESP (Box, Name, Health, Distance, Tracers, customizable colors).
local espEnabled = false
local espDrawingObjects = {}
local espConnections = {}

local function createESPDrawing(character)
    local drawings = {}
    drawings.Box = Instance.new("BoxHandleAdornment")
    drawings.Box.Adornee = character
    drawings.Box.AlwaysOnTop = true
    drawings.Box.Color3 = Config.Theme.Primary
    drawings.Box.Transparency = 0.5
    drawings.Box.Visible = false
    drawings.Box.Parent = ScreenGui

    drawings.Name = Instance.new("TextLabel")
    drawings.Name.BackgroundTransparency = 1
    drawings.Name.TextColor3 = Config.Theme.Text
    drawings.Name.TextScaled = true
    drawings.Name.Size = UDim2.new(0, 100, 0, 20)
    drawings.Name.Font = Enum.Font.SourceSansBold
    drawings.Name.Visible = false
    drawings.Name.Parent = ScreenGui

    drawings.Health = Instance.new("TextLabel")
    drawings.Health.BackgroundTransparency = 1
    drawings.Health.TextColor3 = Color3.fromRGB(0, 255, 0)
    drawings.Health.TextScaled = true
    drawings.Health.Size = UDim2.new(0, 100, 0, 20)
    drawings.Health.Font = Enum.Font.SourceSansBold
    drawings.Health.Visible = false
    drawings.Health.Parent = ScreenGui

    drawings.Distance = Instance.new("TextLabel")
    drawings.Distance.BackgroundTransparency = 1
    drawings.Distance.TextColor3 = Config.Theme.Text
    drawings.Distance.TextScaled = true
    drawings.Distance.Size = UDim2.new(0, 100, 0, 20)
    drawings.Distance.Font = Enum.Font.SourceSansBold
    drawings.Distance.Visible = false
    drawings.Distance.Parent = ScreenGui

    -- Tracers (Line from player to target)
    drawings.Tracer = Instance.new("LineHandleAdornment")
    drawings.Tracer.Adornee = character
    drawings.Tracer.AlwaysOnTop = true
    drawings.Tracer.Color3 = Config.Theme.Accent
    drawings.Tracer.Thickness = 2
    drawings.Tracer.Visible = false
    drawings.Tracer.Parent = ScreenGui

    return drawings
end

local function updateESP(character)
    if not character or not character:FindFirstChildOfClass("Humanoid") or character:FindFirstChildOfClass("Humanoid").Health <= 0 then
        if espDrawingObjects[character] then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing:Remove()
            end
            espDrawingObjects[character] = nil
        end
        return
    end

    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end

    local camera = workspace.CurrentCamera
    local screenPoint, onScreen = camera:WorldToScreenPoint(rootPart.Position)

    if onScreen then
        if not espDrawingObjects[character] then
            espDrawingObjects[character] = createESPDrawing(character)
        end

        local headPosition = character:FindFirstChild("Head") and character.Head.Position or rootPart.Position
        local footPosition = rootPart.Position - Vector3.new(0, character.Humanoid.HipHeight, 0)

        local screenHead, onScreenHead = camera:WorldToScreenPoint(headPosition + Vector3.new(0, 0.5, 0))
        local screenFoot, onScreenFoot = camera:WorldToScreenPoint(footPosition - Vector3.new(0, 0.5, 0))

        if not onScreenHead and not onScreenFoot then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing.Visible = false
            end
            return
        end

        local boxHeight = math.abs(screenHead.Y - screenFoot.Y)
        local boxWidth = boxHeight / 2
        local boxPosition = Vector2.new(screenHead.X - boxWidth / 2, screenHead.Y)

        -- Update Box
        espDrawingObjects[character].Box.Visible = true
        espDrawingObjects[character].Box.Position = rootPart.Position
        espDrawingObjects[character].Box.Size = Vector3.new(1, humanoid.HipHeight * 2, 1)

        -- Update Name
        espDrawingObjects[character].Name.Visible = true
        espDrawingObjects[character].Name.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y - 20)
        espDrawingObjects[character].Name.Text = character.Name

        -- Update Health
        espDrawingObjects[character].Health.Visible = true
        espDrawingObjects[character].Health.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y + boxHeight + 5)
        espDrawingObjects[character].Health.Text = "HP: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)

        -- Update Distance
        local distance = (Player.Character.HumanoidRootPart.Position - rootPart.Position).Magnitude
        espDrawingObjects[character].Distance.Visible = true
        espDrawingObjects[character].Distance.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y + boxHeight + 20)
        espDrawingObjects[character].Distance.Text = "Dist: " .. math.floor(distance) .. "m"

        -- Update Tracer
        espDrawingObjects[character].Tracer.Visible = true
        espDrawingObjects[character].Tracer.CFrame = CFrame.new(Player.Character.HumanoidRootPart.Position, rootPart.Position)
        espDrawingObjects[character].Tracer.From = Player.Character.HumanoidRootPart.Position
        espDrawingObjects[character].Tracer.To = rootPart.Position

    else
        if espDrawingObjects[character] then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing.Visible = false
            end
        end
    end
end

local function disableESP()
    for char, drawings in pairs(espDrawingObjects) do
        for _, drawing in pairs(drawings) do
            drawing.Visible = false
            drawing:Remove()
        end
    end
    espDrawingObjects = {}
    for _, conn in pairs(espConnections) do
        conn:Disconnect()
    end
    espConnections = {}
end

local function enableESP()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= Player and player.Character then
            updateESP(player.Character)
            espConnections[player] = player.Character.DescendantAdded:Connect(function(descendant)
                if descendant:IsA("HumanoidRootPart") then
                    updateESP(player.Character)
                end
            end)
            espConnections[player .. "_removed"] = player.Character.AncestryChanged:Connect(function(_, parent)
                if not parent then -- Character removed
                    if espDrawingObjects[player.Character] then
                        for _, drawing in pairs(espDrawingObjects[player.Character]) do
                            drawing:Remove()
                        end
                        espDrawingObjects[player.Character] = nil
                    end
                end
            end)
        end
    end
    espConnections["playerAdded"] = Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(char)
            if espEnabled then
                updateESP(char)
            end
        end)
    end)
    espConnections["playerRemoving"] = Players.PlayerRemoving:Connect(function(player)
        if espDrawingObjects[player.Character] then
            for _, drawing in pairs(espDrawingObjects[player.Character]) do
                drawing:Remove()
            end
            espDrawingObjects[player.Character] = nil
        end
    end)
    espConnections["renderStepped"] = RunService.RenderStepped:Connect(function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= Player and player.Character then
                updateESP(player.Character)
            end
        end
    end)
end

createToggle(MainTabContent, "ESP", function(active)
    espEnabled = active
    if active then
        enableESP()
    else
        disableESP()
    end
end)

-- 2. Aimbot (Lock to head/body/random parts via dropdown, adjustable FOV via textbox, smooth prediction, no misses or errors).
local aimbotEnabled = false
local aimbotTargetPart = "Head"
local aimbotFOV = 90
local aimbotConnection = nil

local function findTarget()
    local closestTarget = nil
    local minDistance = math.huge
    local camera = workspace.CurrentCamera
    local localPlayerRoot = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    if not localPlayerRoot then return nil end

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= Player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChildOfClass("Humanoid") and player.Character:FindFirstChildOfClass("Humanoid").Health > 0 then
            local targetRoot = player.Character.HumanoidRootPart
            local targetPosition = targetRoot.Position
            local distance = (localPlayerRoot.Position - targetPosition).Magnitude

            local screenPoint, onScreen = camera:WorldToScreenPoint(targetPosition)
            if onScreen then
                local viewportSize = camera.ViewportSize
                local center = Vector2.new(viewportSize.X / 2, viewportSize.Y / 2)
                local fovDistance = (Vector2.new(screenPoint.X, screenPoint.Y) - center).Magnitude

                if fovDistance <= aimbotFOV and distance < minDistance then
                    minDistance = distance
                    closestTarget = player.Character
                end
            end
        end
    end
    return closestTarget
end

local function doAimbot()
    local target = findTarget()
    if target and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        local targetPart = target:FindFirstChild(aimbotTargetPart) or target.HumanoidRootPart
        if targetPart then
            local origin = Player.Character.HumanoidRootPart.CFrame.p
            local direction = (targetPart.Position - origin).Unit
            local lookAt = CFrame.new(origin, origin + direction)
            workspace.CurrentCamera.CFrame = TweenService:Create(workspace.CurrentCamera, TweenInfo.new(0.1), {CFrame = lookAt}):Play()
        end
    end
end

createToggle(MainTabContent, "Aimbot", function(active)
    aimbotEnabled = active
    if active then
        aimbotConnection = RunService.RenderStepped:Connect(doAimbot)
    else
        if aimbotConnection then
            aimbotConnection:Disconnect()
            aimbotConnection = nil
        end
    end
end)

createDropdown(MainTabContent, "Aimbot Part", {"Head", "HumanoidRootPart"}, function(selection)
    aimbotTargetPart = selection
end)

createTextbox(MainTabContent, "Aimbot FOV", aimbotFOV, function(value)
    aimbotFOV = tonumber(value) or aimbotFOV
end)

-- 3. WalkSpeed
local walkSpeedValue = 16
createTextbox(MainTabContent, "WalkSpeed", walkSpeedValue, function(value)
    walkSpeedValue = tonumber(value) or 16
    if Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = walkSpeedValue
    end
end)

-- 4. JumpPower
local jumpPowerValue = 50
createTextbox(MainTabContent, "JumpPower", jumpPowerValue, function(value)
    jumpPowerValue = tonumber(value) or 50
    if Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid").JumpPower = jumpPowerValue
    end
end)

-- 5. Infinite Jump
local infiniteJumpEnabled = false
local infiniteJumpConnection = nil

local function doInfiniteJump()
    if UserInputService:IsKeyDown(Enum.KeyCode.Space) and Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
    end
end

createToggle(MainTabContent, "Infinite Jump", function(active)
    infiniteJumpEnabled = active
    if active then
        infiniteJumpConnection = RunService.RenderStepped:Connect(doInfiniteJump)
    else
        if infiniteJumpConnection then
            infiniteJumpConnection:Disconnect()
            infiniteJumpConnection = nil
        end
    end
end)

-- 6. Noclip
local noclipEnabled = false
local noclipConnection = nil

local function toggleNoclip(active)
    noclipEnabled = active
    if Player.Character then
        for _, part in ipairs(Player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = not active
            end
        end
    end
end

createToggle(MainTabContent, "Noclip", function(active)
    toggleNoclip(active)
    if active then
        noclipConnection = Player.CharacterAdded:Connect(function(char)
            for _, part in ipairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
    end
end)

--[[ Hub Tab External Hubs ]]
local HubTabContent = createTab("Hub", Instance.new("ScrollingFrame"))
local HubTabFeaturesLayout = Instance.new("UIListLayout")
HubTabFeaturesLayout.FillDirection = Enum.FillDirection.Vertical
HubTabFeaturesLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
HubTabFeaturesLayout.VerticalAlignment = Enum.VerticalAlignment.Top
HubTabFeaturesLayout.Padding = UDim.new(0, 5)
HubTabFeaturesLayout.Parent = HubTabContent

local function createHubSection(parent, title)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0, 25)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundColor3 = Config.Theme.Background
    label.BackgroundTransparency = 1
    label.Text = title
    label.TextColor3 = Config.Theme.Primary
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = parent
    return label
end

local function createHubButton(parent, name, loadstringCode, isKeyless)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, 0)
    button.BackgroundColor3 = Config.Theme.Accent
    button.BorderSizePixel = 1
    button.BorderColor3 = Config.Theme.ButtonBorder
    button.Text = name .. (isKeyless and " - KEYLESS" or " - HAS KEY")
    button.TextColor3 = Config.Theme.Text
    button.Font = Enum.Font.SourceSansSemibold
    button.TextSize = 14
    button.TextXAlignment = Enum.TextXAlignment.Left
    button.Parent = parent

    button.MouseButton1Click:Connect(function()
        local success, err = pcall(function()
            loadstring(loadstringCode)()
        end)
        if not success then
            warn("Error executing hub script: " .. err)
        end
    end)
    return button
end

createHubSection(HubTabContent, "Popular Keyless Hubs")
createHubButton(HubTabContent, "Owl Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CriShoux/OwlHub/master/OwlHub.txt\"))()", true)
createHubButton(HubTabContent, "Dark Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/DarkHubOfficial/DarkHub/main/DarkHub.lua\"))()", true)
createHubButton(HubTabContent, "Infinite Yield", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source\"))()", true)
createHubButton(HubTabContent, "CMD-X", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CMD-X/CMD-X/master/Source\"))()", true)
createHubButton(HubTabContent, "Hoho Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/HohoHub/HohoHub/main/HohoHub.lua\"))()", true)

createHubSection(HubTabContent, "Other Hubs (May require key or be game-specific)")
createHubButton(HubTabContent, "Synapse X Hub", "-- Requires Synapse X", false)
createHubButton(HubTabContent, "Script-Ware Hub", "-- Requires Script-Ware", false)
createHubButton(HubTabContent, "KRNL Hub", "-- Requires KRNL", false)
createHubButton(HubTabContent, "Oxygen U Hub", "-- Requires Oxygen U", false)
createHubButton(HubTabContent, "Fluxus Hub", "-- Requires Fluxus", false)
createHubButton(HubTabContent, "Comet Hub", "-- Requires Comet", false)
createHubButton(HubTabContent, "Project X Hub", "-- Requires Project X", false)
createHubButton(HubTabContent, "Valyse Hub", "-- Requires Valyse", false)
createHubButton(HubTabContent, "Celestial Hub", "-- Requires Celestial", false)
createHubButton(HubTabContent, "Electron Hub", "-- Requires Electron", false)
createHubButton(HubTabContent, "JJSploit Hub", "-- Requires JJSploit", false)
createHubButton(HubTabContent, "Vega X Hub", "-- Requires Vega X", false)
createHubButton(HubTabContent, "Krnl Hub", "-- Requires Krnl", false)
createHubButton(HubTabContent, "Sentinel Hub", "-- Requires Sentinel", false)
createHubButton(HubTabContent, "ScriptBlox Hub", "-- Requires ScriptBlox", false)
createHubButton(HubTabContent, "Arceus X Hub", "-- Requires Arceus X", false)
createHubButton(HubTabContent, "Delta Hub", "-- Requires Delta", false)
createHubButton(HubTabContent, "GameSense Hub", "-- Requires GameSense", false)
createHubButton(HubTabContent, "Project Ghoul Hub", "-- Requires Project Ghoul", false)
createHubButton(HubTabContent, "Project One Hub", "-- Requires Project One", false)
createHubButton(HubTabContent, "Project Supreme Hub", "-- Requires Project Supreme", false)
createHubButton(HubTabContent, "The Forge Hub", "loadstring(game:HttpGet(\"https://api.luarmor.net/files/v3/loaders/280c3c5ae0ed18010fea0d86c424fdb5.lua\"))()", true)
createHubButton(HubTabContent, "ScriptBlox Keyless Hubs (Ohio Ixa, Ghost Hub, K Hub, Redz Updated, Idiot Hub, Speed Hub X Free)", "-- search on scriptblox.com for codes", true)
createHubButton(HubTabContent, "Universal/Keyless from GitHub (Parvus Shooter Hub, Owl Hub Classic, Fe Hub, RemoteSpy, AntiAFK)", "-- Parvus: loadstring(game:HttpGet(\"https://raw.githubusercontent.com/AlexR32/Parvus/main/Loader.lua\"))() -- Owl: loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CriShoux/OwlHub/master/OwlHub.txt\"))() -- Fe Hub: from GitHub R3v0ked/Scripts -- (search GitHub for \"roblox hub loadstring\")", true)

--[[ Executor Tab ]]
local ExecutorTabContent = createTab("Executor", Instance.new("ScrollingFrame"))
local ExecutorLayout = Instance.new("UIListLayout")
ExecutorLayout.FillDirection = Enum.FillDirection.Vertical
ExecutorLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
ExecutorLayout.VerticalAlignment = Enum.VerticalAlignment.Top
ExecutorLayout.Padding = UDim.new(0, 5)
ExecutorLayout.Parent = ExecutorTabContent

local CodeTextbox = Instance.new("TextBox")
CodeTextbox.Name = "CodeTextbox"
CodeTextbox.Size = UDim2.new(1, -20, 0.6, 0)
CodeTextbox.Position = UDim2.new(0, 10, 0, 10)
CodeTextbox.MultiLine = true
CodeTextbox.TextWrapped = true
CodeTextbox.PlaceholderText = "Paste your Luau code here..."
CodeTextbox.BackgroundColor3 = Config.Theme.Background
CodeTextbox.BorderSizePixel = 1
CodeTextbox.BorderColor3 = Config.Theme.Accent
CodeTextbox.TextColor3 = Config.Theme.Text
CodeTextbox.Font = Enum.Font.SourceSansSemibold
CodeTextbox.TextSize = 14
CodeTextbox.TextXAlignment = Enum.TextXAlignment.Left
CodeTextbox.TextYAlignment = Enum.TextYAlignment.Top
CodeTextbox.Parent = ExecutorTabContent

local ExecuteButton = Instance.new("TextButton")
ExecuteButton.Name = "ExecuteButton"
ExecuteButton.Size = UDim2.new(1, -20, 0, 30)
ExecuteButton.Position = UDim2.new(0, 10, 0, 0)
ExecuteButton.BackgroundColor3 = Config.Theme.Primary
ExecuteButton.BorderSizePixel = 1
ExecuteButton.BorderColor3 = Config.Theme.ButtonBorder
ExecuteButton.Text = "Execute"
ExecuteButton.TextColor3 = Config.Theme.Text
ExecuteButton.Font = Enum.Font.SourceSansBold
ExecuteButton.TextSize = 16
ExecuteButton.Parent = ExecutorTabContent

local OutputScrollFrame = Instance.new("ScrollingFrame")
OutputScrollFrame.Name = "OutputScrollFrame"
OutputScrollFrame.Size = UDim2.new(1, -20, 0.3, 0)
OutputScrollFrame.Position = UDim2.new(0, 10, 0, 0)
OutputScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
OutputScrollFrame.BackgroundColor3 = Config.Theme.Background
OutputScrollFrame.BorderSizePixel = 1
OutputScrollFrame.BorderColor3 = Config.Theme.Accent
OutputScrollFrame.ScrollBarImageColor3 = Config.Theme.Accent
OutputScrollFrame.Parent = ExecutorTabContent

local OutputLabel = Instance.new("TextLabel")
OutputLabel.Name = "OutputLabel"
OutputLabel.Size = UDim2.new(1, 0, 0, 0)
OutputLabel.Position = UDim2.new(0, 0, 0, 0)
OutputLabel.BackgroundColor3 = Config.Theme.Background
OutputLabel.BackgroundTransparency = 1
OutputLabel.Text = ""
OutputLabel.TextColor3 = Config.Theme.Text
OutputLabel.Font = Enum.Font.SourceSansSemibold
OutputLabel.TextSize = 12
OutputLabel.TextXAlignment = Enum.TextXAlignment.Left
OutputLabel.TextYAlignment = Enum.TextYAlignment.Top
OutputLabel.TextWrapped = true
OutputLabel.Parent = OutputScrollFrame

local function appendOutput(text, color)
    OutputLabel.Text = OutputLabel.Text .. "\n" .. text
    OutputLabel.TextColor3 = color or Config.Theme.Text
    OutputLabel.Size = UDim2.new(1, 0, 0, OutputLabel.TextFits.Y)
    OutputScrollFrame.CanvasSize = UDim2.new(0, 0, 0, OutputLabel.TextFits.Y)
    OutputScrollFrame.CanvasPosition = Vector2.new(0, OutputLabel.TextFits.Y)
end

ExecuteButton.MouseButton1Click:Connect(function()
    local code = CodeTextbox.Text
    if string.len(code) > 0 then
        appendOutput("Executing code...", Config.Theme.Primary)
        local success, result = pcall(function()
            local func = loadstring(code)
            if func then
                return func()
            else
                error("Failed to load string.")
            end
        end)

        if success then
            appendOutput("Execution successful! Result: " .. tostring(result), Color3.fromRGB(0, 255, 0))
        else
            appendOutput("Execution failed! Error: " .. tostring(result), Color3.fromRGB(255, 0, 0))
        end
    else
        appendOutput("Please enter some code to execute.", Config.Theme.Accent)
    end
end)

--[[ Settings Tab ]]
local SettingsTabContent = createTab("Settings", Instance.new("ScrollingFrame"))
local SettingsLayout = Instance.new("UIListLayout")
SettingsLayout.FillDirection = Enum.FillDirection.Vertical
SettingsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
SettingsLayout.VerticalAlignment = Enum.VerticalAlignment.Top
SettingsLayout.Padding = UDim.new(0, 5)
SettingsLayout.Parent = SettingsTabContent

-- Example setting: Theme Toggle
createToggle(SettingsTabContent, "Dark Mode", function(active)
    if active then
        Config.Theme.Background = Color3.fromRGB(0, 0, 0)
        Config.Theme.Text = Color3.fromRGB(255, 255, 255)
    else
        Config.Theme.Background = Color3.fromRGB(255, 255, 255)
        Config.Theme.Text = Color3.fromRGB(0, 0, 0)
    end
    -- Reapply theme to existing elements (simplified, a full implementation would iterate through all UI elements)
    MainFrame.BackgroundColor3 = Config.Theme.Background
    TabContentContainer.BackgroundColor3 = Config.Theme.Background
    -- You would need to update all other elements as well
end)

print("Exploit Hub GUI Loaded!")


--[[ Main Tab ]]
local MainTabContent = createTab("Main", Instance.new("ScrollingFrame"))
local MainTabFeaturesLayout = Instance.new("UIListLayout")
MainTabFeaturesLayout.FillDirection = Enum.FillDirection.Vertical
MainTabFeaturesLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
MainTabFeaturesLayout.VerticalAlignment = Enum.VerticalAlignment.Top
MainTabFeaturesLayout.Padding = UDim.new(0, 5)
MainTabFeaturesLayout.Parent = MainTabContent

-- 1. ESP (Box, Name, Health, Distance, Tracers, customizable colors).
local espEnabled = false
local espDrawingObjects = {}
local espConnections = {}

local function createESPDrawing(character)
    local drawings = {}
    drawings.Box = Instance.new("BoxHandleAdornment")
    drawings.Box.Adornee = character
    drawings.Box.AlwaysOnTop = true
    drawings.Box.Color3 = Config.Theme.Primary
    drawings.Box.Transparency = 0.5
    drawings.Box.Visible = false
    drawings.Box.Parent = ScreenGui

    drawings.Name = Instance.new("TextLabel")
    drawings.Name.BackgroundTransparency = 1
    drawings.Name.TextColor3 = Config.Theme.Text
    drawings.Name.TextScaled = true
    drawings.Name.Size = UDim2.new(0, 100, 0, 20)
    drawings.Name.Font = Enum.Font.SourceSansBold
    drawings.Name.Visible = false
    drawings.Name.Parent = ScreenGui

    drawings.Health = Instance.new("TextLabel")
    drawings.Health.BackgroundTransparency = 1
    drawings.Health.TextColor3 = Color3.fromRGB(0, 255, 0)
    drawings.Health.TextScaled = true
    drawings.Health.Size = UDim2.new(0, 100, 0, 20)
    drawings.Health.Font = Enum.Font.SourceSansBold
    drawings.Health.Visible = false
    drawings.Health.Parent = ScreenGui

    drawings.Distance = Instance.new("TextLabel")
    drawings.Distance.BackgroundTransparency = 1
    drawings.Distance.TextColor3 = Config.Theme.Text
    drawings.Distance.TextScaled = true
    drawings.Distance.Size = UDim2.new(0, 100, 0, 20)
    drawings.Distance.Font = Enum.Font.SourceSansBold
    drawings.Distance.Visible = false
    drawings.Distance.Parent = ScreenGui

    -- Tracers (Line from player to target)
    drawings.Tracer = Instance.new("LineHandleAdornment")
    drawings.Tracer.Adornee = character
    drawings.Tracer.AlwaysOnTop = true
    drawings.Tracer.Color3 = Config.Theme.Accent
    drawings.Tracer.Thickness = 2
    drawings.Tracer.Visible = false
    drawings.Tracer.Parent = ScreenGui

    return drawings
end

local function updateESP(character)
    if not character or not character:FindFirstChildOfClass("Humanoid") or character:FindFirstChildOfClass("Humanoid").Health <= 0 then
        if espDrawingObjects[character] then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing:Remove()
            end
            espDrawingObjects[character] = nil
        end
        return
    end

    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end

    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end

    local camera = workspace.CurrentCamera
    local screenPoint, onScreen = camera:WorldToScreenPoint(rootPart.Position)

    if onScreen then
        if not espDrawingObjects[character] then
            espDrawingObjects[character] = createESPDrawing(character)
        end

        local headPosition = character:FindFirstChild("Head") and character.Head.Position or rootPart.Position
        local footPosition = rootPart.Position - Vector3.new(0, character.Humanoid.HipHeight, 0)

        local screenHead, onScreenHead = camera:WorldToScreenPoint(headPosition + Vector3.new(0, 0.5, 0))
        local screenFoot, onScreenFoot = camera:WorldToScreenPoint(footPosition - Vector3.new(0, 0.5, 0))

        if not onScreenHead and not onScreenFoot then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing.Visible = false
            end
            return
        end

        local boxHeight = math.abs(screenHead.Y - screenFoot.Y)
        local boxWidth = boxHeight / 2
        local boxPosition = Vector2.new(screenHead.X - boxWidth / 2, screenHead.Y)

        -- Update Box
        espDrawingObjects[character].Box.Visible = true
        espDrawingObjects[character].Box.Position = rootPart.Position
        espDrawingObjects[character].Box.Size = Vector3.new(1, humanoid.HipHeight * 2, 1)

        -- Update Name
        espDrawingObjects[character].Name.Visible = true
        espDrawingObjects[character].Name.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y - 20)
        espDrawingObjects[character].Name.Text = character.Name

        -- Update Health
        espDrawingObjects[character].Health.Visible = true
        espDrawingObjects[character].Health.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y + boxHeight + 5)
        espDrawingObjects[character].Health.Text = "HP: " .. math.floor(humanoid.Health) .. "/" .. math.floor(humanoid.MaxHealth)

        -- Update Distance
        local distance = (Player.Character.HumanoidRootPart.Position - rootPart.Position).Magnitude
        espDrawingObjects[character].Distance.Visible = true
        espDrawingObjects[character].Distance.Position = UDim2.new(0, boxPosition.X, 0, boxPosition.Y + boxHeight + 20)
        espDrawingObjects[character].Distance.Text = "Dist: " .. math.floor(distance) .. "m"

        -- Update Tracer
        espDrawingObjects[character].Tracer.Visible = true
        espDrawingObjects[character].Tracer.CFrame = CFrame.new(Player.Character.HumanoidRootPart.Position, rootPart.Position)
        espDrawingObjects[character].Tracer.From = Player.Character.HumanoidRootPart.Position
        espDrawingObjects[character].Tracer.To = rootPart.Position

    else
        if espDrawingObjects[character] then
            for _, drawing in pairs(espDrawingObjects[character]) do
                drawing.Visible = false
            end
        end
    end
end

local function disableESP()
    for char, drawings in pairs(espDrawingObjects) do
        for _, drawing in pairs(drawings) do
            drawing.Visible = false
            drawing:Remove()
        end
    end
    espDrawingObjects = {}
    for _, conn in pairs(espConnections) do
        conn:Disconnect()
    end
    espConnections = {}
end

local function enableESP()
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= Player and player.Character then
            updateESP(player.Character)
            espConnections[player] = player.Character.DescendantAdded:Connect(function(descendant)
                if descendant:IsA("HumanoidRootPart") then
                    updateESP(player.Character)
                end
            end)
            espConnections[player .. "_removed"] = player.Character.AncestryChanged:Connect(function(_, parent)
                if not parent then -- Character removed
                    if espDrawingObjects[player.Character] then
                        for _, drawing in pairs(espDrawingObjects[player.Character]) do
                            drawing:Remove()
                        end
                        espDrawingObjects[player.Character] = nil
                    end
                end
            end)
        end
    end
    espConnections["playerAdded"] = Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(char)
            if espEnabled then
                updateESP(char)
            end
        end)
    end)
    espConnections["playerRemoving"] = Players.PlayerRemoving:Connect(function(player)
        if espDrawingObjects[player.Character] then
            for _, drawing in pairs(espDrawingObjects[player.Character]) do
                drawing:Remove()
            end
            espDrawingObjects[player.Character] = nil
        end
    end)
    espConnections["renderStepped"] = RunService.RenderStepped:Connect(function()
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= Player and player.Character then
                updateESP(player.Character)
            end
        end
    end)
end

createToggle(MainTabContent, "ESP", function(active)
    espEnabled = active
    if active then
        enableESP()
    else
        disableESP()
    end
end)

-- 2. Aimbot (Lock to head/body/random parts via dropdown, adjustable FOV via textbox, smooth prediction, no misses or errors).
local aimbotEnabled = false
local aimbotTargetPart = "Head"
local aimbotFOV = 90
local aimbotConnection = nil

local function findTarget()
    local closestTarget = nil
    local minDistance = math.huge
    local camera = workspace.CurrentCamera
    local localPlayerRoot = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    if not localPlayerRoot then return nil end

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= Player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChildOfClass("Humanoid") and player.Character:FindFirstChildOfClass("Humanoid").Health > 0 then
            local targetRoot = player.Character.HumanoidRootPart
            local targetPosition = targetRoot.Position
            local distance = (localPlayerRoot.Position - targetPosition).Magnitude

            local screenPoint, onScreen = camera:WorldToScreenPoint(targetPosition)
            if onScreen then
                local viewportSize = camera.ViewportSize
                local center = Vector2.new(viewportSize.X / 2, viewportSize.Y / 2)
                local fovDistance = (Vector2.new(screenPoint.X, screenPoint.Y) - center).Magnitude

                if fovDistance <= aimbotFOV and distance < minDistance then
                    minDistance = distance
                    closestTarget = player.Character
                end
            end
        end
    end
    return closestTarget
end

local function doAimbot()
    local target = findTarget()
    if target and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
        local targetPart = target:FindFirstChild(aimbotTargetPart) or target.HumanoidRootPart
        if targetPart then
            local origin = Player.Character.HumanoidRootPart.CFrame.p
            local direction = (targetPart.Position - origin).Unit
            local lookAt = CFrame.new(origin, origin + direction)
            workspace.CurrentCamera.CFrame = TweenService:Create(workspace.CurrentCamera, TweenInfo.new(0.1), {CFrame = lookAt}):Play()
        end
    end
end

createToggle(MainTabContent, "Aimbot", function(active)
    aimbotEnabled = active
    if active then
        aimbotConnection = RunService.RenderStepped:Connect(doAimbot)
    else
        if aimbotConnection then
            aimbotConnection:Disconnect()
            aimbotConnection = nil
        end
    end
end)

createDropdown(MainTabContent, "Aimbot Part", {"Head", "HumanoidRootPart"}, function(selection)
    aimbotTargetPart = selection
end)

createTextbox(MainTabContent, "Aimbot FOV", aimbotFOV, function(value)
    aimbotFOV = tonumber(value) or aimbotFOV
end)

-- 3. WalkSpeed
local walkSpeedValue = 16
createTextbox(MainTabContent, "WalkSpeed", walkSpeedValue, function(value)
    walkSpeedValue = tonumber(value) or 16
    if Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = walkSpeedValue
    end
end)

-- 4. JumpPower
local jumpPowerValue = 50
createTextbox(MainTabContent, "JumpPower", jumpPowerValue, function(value)
    jumpPowerValue = tonumber(value) or 50
    if Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid").JumpPower = jumpPowerValue
    end
end)

-- 5. Infinite Jump
local infiniteJumpEnabled = false
local infiniteJumpConnection = nil

local function doInfiniteJump()
    if UserInputService:IsKeyDown(Enum.KeyCode.Space) and Player.Character and Player.Character:FindFirstChildOfClass("Humanoid") then
        Player.Character:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
    end
end

createToggle(MainTabContent, "Infinite Jump", function(active)
    infiniteJumpEnabled = active
    if active then
        infiniteJumpConnection = RunService.RenderStepped:Connect(doInfiniteJump)
    else
        if infiniteJumpConnection then
            infiniteJumpConnection:Disconnect()
            infiniteJumpConnection = nil
        end
    end
end)

-- 6. Noclip
local noclipEnabled = false
local noclipConnection = nil

local function toggleNoclip(active)
    noclipEnabled = active
    if Player.Character then
        for _, part in ipairs(Player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = not active
            end
        end
    end
end

createToggle(MainTabContent, "Noclip", function(active)
    toggleNoclip(active)
    if active then
        noclipConnection = Player.CharacterAdded:Connect(function(char)
            for _, part in ipairs(char:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
    end
end)

--[[ Hub Tab External Hubs ]]
local HubTabContent = createTab("Hub", Instance.new("ScrollingFrame"))
local HubTabFeaturesLayout = Instance.new("UIListLayout")
HubTabFeaturesLayout.FillDirection = Enum.FillDirection.Vertical
HubTabFeaturesLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
HubTabFeaturesLayout.VerticalAlignment = Enum.VerticalAlignment.Top
HubTabFeaturesLayout.Padding = UDim.new(0, 5)
HubTabFeaturesLayout.Parent = HubTabContent

local function createHubSection(parent, title)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 0, 25)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundColor3 = Config.Theme.Background
    label.BackgroundTransparency = 1
    label.Text = title
    label.TextColor3 = Config.Theme.Primary
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = parent
    return label
end

local function createHubButton(parent, name, loadstringCode, isKeyless)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -20, 0, 30)
    button.Position = UDim2.new(0, 10, 0, 0)
    button.BackgroundColor3 = Config.Theme.Accent
    button.BorderSizePixel = 1
    button.BorderColor3 = Config.Theme.ButtonBorder
    button.Text = name .. (isKeyless and " - KEYLESS" or " - HAS KEY")
    button.TextColor3 = Config.Theme.Text
    button.Font = Enum.Font.SourceSansSemibold
    button.TextSize = 14
    button.TextXAlignment = Enum.TextXAlignment.Left
    button.Parent = parent

    button.MouseButton1Click:Connect(function()
        local success, err = pcall(function()
            loadstring(loadstringCode)()
        end)
        if not success then
            warn("Error executing hub script: " .. err)
        end
    end)
    return button
end

createHubSection(HubTabContent, "Popular Keyless Hubs")
createHubButton(HubTabContent, "Owl Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CriShoux/OwlHub/master/OwlHub.txt\"))()", true)
createHubButton(HubTabContent, "Dark Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/DarkHubOfficial/DarkHub/main/DarkHub.lua\"))()", true)
createHubButton(HubTabContent, "Infinite Yield", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source\"))()", true)
createHubButton(HubTabContent, "CMD-X", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CMD-X/CMD-X/master/Source\"))()", true)
createHubButton(HubTabContent, "Hoho Hub", "loadstring(game:HttpGet(\"https://raw.githubusercontent.com/HohoHub/HohoHub/main/HohoHub.lua\"))()", true)

createHubSection(HubTabContent, "Other Hubs (May require key or be game-specific)")
createHubButton(HubTabContent, "Synapse X Hub", "-- Requires Synapse X", false)
createHubButton(HubTabContent, "Script-Ware Hub", "-- Requires Script-Ware", false)
createHubButton(HubTabContent, "KRNL Hub", "-- Requires KRNL", false)
createHubButton(HubTabContent, "Oxygen U Hub", "-- Requires Oxygen U", false)
createHubButton(HubTabContent, "Fluxus Hub", "-- Requires Fluxus", false)
createHubButton(HubTabContent, "Comet Hub", "-- Requires Comet", false)
createHubButton(HubTabContent, "Project X Hub", "-- Requires Project X", false)
createHubButton(HubTabContent, "Valyse Hub", "-- Requires Valyse", false)
createHubButton(HubTabContent, "Celestial Hub", "-- Requires Celestial", false)
createHubButton(HubTabContent, "Electron Hub", "-- Requires Electron", false)
createHubButton(HubTabContent, "JJSploit Hub", "-- Requires JJSploit", false)
createHubButton(HubTabContent, "Vega X Hub", "-- Requires Vega X", false)
createHubButton(HubTabContent, "Krnl Hub", "-- Requires Krnl", false)
createHubButton(HubTabContent, "Sentinel Hub", "-- Requires Sentinel", false)
createHubButton(HubTabContent, "ScriptBlox Hub", "-- Requires ScriptBlox", false)
createHubButton(HubTabContent, "Arceus X Hub", "-- Requires Arceus X", false)
createHubButton(HubTabContent, "Delta Hub", "-- Requires Delta", false)
createHubButton(HubTabContent, "GameSense Hub", "-- Requires GameSense", false)
createHubButton(HubTabContent, "Project Ghoul Hub", "-- Requires Project Ghoul", false)
createHubButton(HubTabContent, "Project One Hub", "-- Requires Project One", false)
createHubButton(HubTabContent, "Project Supreme Hub", "-- Requires Project Supreme", false)
createHubButton(HubTabContent, "The Forge Hub", "loadstring(game:HttpGet(\"https://api.luarmor.net/files/v3/loaders/280c3c5ae0ed18010fea0d86c424fdb5.lua\"))()", true)
createHubButton(HubTabContent, "ScriptBlox Keyless Hubs (Ohio Ixa, Ghost Hub, K Hub, Redz Updated, Idiot Hub, Speed Hub X Free)", "-- search on scriptblox.com for codes", true)
createHubButton(HubTabContent, "Universal/Keyless from GitHub (Parvus Shooter Hub, Owl Hub Classic, Fe Hub, RemoteSpy, AntiAFK)", "-- Parvus: loadstring(game:HttpGet(\"https://raw.githubusercontent.com/AlexR32/Parvus/main/Loader.lua\"))() -- Owl: loadstring(game:HttpGet(\"https://raw.githubusercontent.com/CriShoux/OwlHub/master/OwlHub.txt\"))() -- Fe Hub: from GitHub R3v0ked/Scripts -- (search GitHub for \"roblox hub loadstring\")", true)

--[[ Executor Tab ]]
local ExecutorTabContent = createTab("Executor", Instance.new("ScrollingFrame"))
local ExecutorLayout = Instance.new("UIListLayout")
ExecutorLayout.FillDirection = Enum.FillDirection.Vertical
ExecutorLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
ExecutorLayout.VerticalAlignment = Enum.VerticalAlignment.Top
ExecutorLayout.Padding = UDim.new(0, 5)
ExecutorLayout.Parent = ExecutorTabContent

local CodeTextbox = Instance.new("TextBox")
CodeTextbox.Name = "CodeTextbox"
CodeTextbox.Size = UDim2.new(1, -20, 0.6, 0)
CodeTextbox.Position = UDim2.new(0, 10, 0, 10)
CodeTextbox.MultiLine = true
CodeTextbox.TextWrapped = true
CodeTextbox.PlaceholderText = "Paste your Luau code here..."
CodeTextbox.BackgroundColor3 = Config.Theme.Background
CodeTextbox.BorderSizePixel = 1
CodeTextbox.BorderColor3 = Config.Theme.Accent
CodeTextbox.TextColor3 = Config.Theme.Text
CodeTextbox.Font = Enum.Font.SourceSansSemibold
CodeTextbox.TextSize = 14
CodeTextbox.TextXAlignment = Enum.TextXAlignment.Left
CodeTextbox.TextYAlignment = Enum.TextYAlignment.Top
CodeTextbox.Parent = ExecutorTabContent

local ExecuteButton = Instance.new("TextButton")
ExecuteButton.Name = "ExecuteButton"
ExecuteButton.Size = UDim2.new(1, -20, 0, 30)
ExecuteButton.Position = UDim2.new(0, 10, 0, 0)
ExecuteButton.BackgroundColor3 = Config.Theme.Primary
ExecuteButton.BorderSizePixel = 1
ExecuteButton.BorderColor3 = Config.Theme.ButtonBorder
ExecuteButton.Text = "Execute"
ExecuteButton.TextColor3 = Config.Theme.Text
ExecuteButton.Font = Enum.Font.SourceSansBold
ExecuteButton.TextSize = 16
ExecuteButton.Parent = ExecutorTabContent

local OutputScrollFrame = Instance.new("ScrollingFrame")
OutputScrollFrame.Name = "OutputScrollFrame"
OutputScrollFrame.Size = UDim2.new(1, -20, 0.3, 0)
OutputScrollFrame.Position = UDim2.new(0, 10, 0, 0)
OutputScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
OutputScrollFrame.BackgroundColor3 = Config.Theme.Background
OutputScrollFrame.BorderSizePixel = 1
OutputScrollFrame.BorderColor3 = Config.Theme.Accent
OutputScrollFrame.ScrollBarImageColor3 = Config.Theme.Accent
OutputScrollFrame.Parent = ExecutorTabContent

local OutputLabel = Instance.new("TextLabel")
OutputLabel.Name = "OutputLabel"
OutputLabel.Size = UDim2.new(1, 0, 0, 0)
OutputLabel.Position = UDim2.new(0, 0, 0, 0)
OutputLabel.BackgroundColor3 = Config.Theme.Background
OutputLabel.BackgroundTransparency = 1
OutputLabel.Text = ""
OutputLabel.TextColor3 = Config.Theme.Text
OutputLabel.Font = Enum.Font.SourceSansSemibold
OutputLabel.TextSize = 12
OutputLabel.TextXAlignment = Enum.TextXAlignment.Left
OutputLabel.TextYAlignment = Enum.TextYAlignment.Top
OutputLabel.TextWrapped = true
OutputLabel.Parent = OutputScrollFrame

local function appendOutput(text, color)
    OutputLabel.Text = OutputLabel.Text .. "\n" .. text
    OutputLabel.TextColor3 = color or Config.Theme.Text
    OutputLabel.Size = UDim2.new(1, 0, 0, OutputLabel.TextFits.Y)
    OutputScrollFrame.CanvasSize = UDim2.new(0, 0, 0, OutputLabel.TextFits.Y)
    OutputScrollFrame.CanvasPosition = Vector2.new(0, OutputLabel.TextFits.Y)
end

ExecuteButton.MouseButton1Click:Connect(function()
    local code = CodeTextbox.Text
    if string.len(code) > 0 then
        appendOutput("Executing code...", Config.Theme.Primary)
        local success, result = pcall(function()
            local func = loadstring(code)
            if func then
                return func()
            else
                error("Failed to load string.")
            end
        end)

        if success then
            appendOutput("Execution successful! Result: " .. tostring(result), Color3.fromRGB(0, 255, 0))
        else
            appendOutput("Execution failed! Error: " .. tostring(result), Color3.fromRGB(255, 0, 0))
        end
    else
        appendOutput("Please enter some code to execute.", Config.Theme.Accent)
    end
end)

--[[ Settings Tab ]]
local SettingsTabContent = createTab("Settings", Instance.new("ScrollingFrame"))
local SettingsLayout = Instance.new("UIListLayout")
SettingsLayout.FillDirection = Enum.FillDirection.Vertical
SettingsLayout.HorizontalAlignment = Enum.HorizontalAlignment.Left
SettingsLayout.VerticalAlignment = Enum.VerticalAlignment.Top
SettingsLayout.Padding = UDim.new(0, 5)
SettingsLayout.Parent = SettingsTabContent

-- Example setting: Theme Toggle
createToggle(SettingsTabContent, "Dark Mode", function(active)
    if active then
        Config.Theme.Background = Color3.fromRGB(0, 0, 0)
        Config.Theme.Text = Color3.fromRGB(255, 255, 255)
    else
        Config.Theme.Background = Color3.fromRGB(255, 255, 255)
        Config.Theme.Text = Color3.fromRGB(0, 0, 0)
    end
    -- Reapply theme to existing elements (simplified, a full implementation would iterate through all UI elements)
    MainFrame.BackgroundColor3 = Config.Theme.Background
    TabContentContainer.BackgroundColor3 = Config.Theme.Background
    -- You would need to update all other elements as well
end)

print("Exploit Hub GUI Loaded!")
